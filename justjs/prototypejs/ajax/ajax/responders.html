<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Prototype API documentation | Ajax.Responders namespace</title>
	  <meta name="generator" content="PDoc" />
	  
	  <script type="text/javascript" charset="utf-8" src="../../javascripts/prototype.js"></script>
<script type="text/javascript" charset="utf-8" src="../../javascripts/effects.js"></script>
<script type="text/javascript" charset="utf-8" src="../../javascripts/controls.js"></script>
	  <script type="text/javascript" charset="utf-8" src="../../javascripts/application.js"></script>
<script type="text/javascript" charset="utf-8" src="../../javascripts/code_highlighter.js"></script>

	  <script type="text/javascript" charset="utf-8" src="../../javascripts/item_index.js"></script>
	  	  
	  <link type="text/css" rel="stylesheet" charset="utf-8" media="screen, projection" href="../../stylesheets/core.css" />
<link type="text/css" rel="stylesheet" charset="utf-8" media="screen, projection" href="../../stylesheets/api.css" />
	  
	  <script type="text/javascript">PDoc.pathPrefix = '../../';</script>
  </head>
  <body class="">
    <div id="page">
      
      <div id="masthead">
        <div id="masthead_content">
          <a href="http://prototypejs.org">
            <h1 id="logo"><span class="replaced">Prototype JavaScript framework</span></h1>
          </a>
        </div> <!-- #masthead_content -->
      </div> <!-- #masthead -->
      
      <div id="menu" class="clearfix">
        <div class="api-box">
          <h2><a href="#" id="api_menu_button">Menu &darr;</a></h2>
          
    			<ul id="api_menu" class="menu-items" style="display: none">
    				
    					<li class="current-parent">              <div class='menu-item'>
                <a class="section" title="Ajax section (section)" href="../../ajax_section.html">Ajax section</a>
              </div>
<ul><li class="current-parent">              <div class='menu-item'>
                <a class="namespace" title="Ajax (namespace)" href="../../ajax/ajax.html">Ajax</a>
              </div>
<ul><li>              <div class='menu-item'>
                <a class="class" title="Ajax.PeriodicalUpdater (class)" href="../../ajax/ajax/periodicalupdater.html">Ajax.PeriodicalUpdater</a>
              </div>
</li>
<li>              <div class='menu-item'>
                <a class="class" title="Ajax.Request (class)" href="../../ajax/ajax/request.html">Ajax.Request</a>
              </div>
</li>
<li class="current">              <div class='menu-item'>
                <a class="namespace" title="Ajax.Responders (namespace)" href="../../ajax/ajax/responders.html">Ajax.Responders</a>
              </div>
</li>
<li>              <div class='menu-item'>
                <a class="class" title="Ajax.Response (class)" href="../../ajax/ajax/response.html">Ajax.Response</a>
              </div>
</li>
<li>              <div class='menu-item'>
                <a class="class" title="Ajax.Updater (class)" href="../../ajax/ajax/updater.html">Ajax.Updater</a>
              </div>
</li></ul></li></ul></li>
    				
    					<li>              <div class='menu-item'>
                <a class="section" title="DOM section (section)" href="../../dom_section.html">DOM section</a>
              </div>
<ul><li>              <div class='menu-item'>
                <a class="utility" title="$ (utility)" href="../../dom/dollar.html">$</a>
              </div>
</li>
<li>              <div class='menu-item'>
                <a class="utility" title="$$ (utility)" href="../../dom/dollardollar.html">$$</a>
              </div>
</li>
<li>              <div class='menu-item'>
                <a class="utility" title="$F (utility)" href="../../dom/dollarf.html">$F</a>
              </div>
</li>
<li>              <div class='menu-item'>
                <a class="namespace" title="Abstract (namespace)" href="../../dom/abstract.html">Abstract</a>
              </div>
<ul><li>              <div class='menu-item'>
                <a class="class" title="Abstract.EventObserver (class)" href="../../dom/abstract/eventobserver.html">Abstract.EventObserver</a>
              </div>
</li>
<li>              <div class='menu-item'>
                <a class="class" title="Abstract.TimedObserver (class)" href="../../dom/abstract/timedobserver.html">Abstract.TimedObserver</a>
              </div>
</li></ul></li>
<li>              <div class='menu-item'>
                <a class="class" title="Element (class)" href="../../dom/element.html">Element</a>
              </div>
</li>
<li>              <div class='menu-item'>
                <a class="namespace" title="Event (namespace)" href="../../dom/event.html">Event</a>
              </div>
</li>
<li>              <div class='menu-item'>
                <a class="namespace" title="Form (namespace)" href="../../dom/form.html">Form</a>
              </div>
<ul><li>              <div class='menu-item'>
                <a class="namespace" title="Form.Element (namespace)" href="../../dom/form/element.html">Form.Element</a>
              </div>
<ul><li>              <div class='menu-item'>
                <a class="class" title="Form.Element.EventObserver (class)" href="../../dom/form/element/eventobserver.html">Form.Element.EventObserver</a>
              </div>
</li>
<li>              <div class='menu-item'>
                <a class="class" title="Form.Element.EventObserver (class)" href="../../dom/form/element/eventobserver.html">Form.Element.EventObserver</a>
              </div>
</li>
<li>              <div class='menu-item'>
                <a class="class" title="Form.Element.Observer (class)" href="../../dom/form/element/observer.html">Form.Element.Observer</a>
              </div>
</li></ul></li>
<li>              <div class='menu-item'>
                <a class="class" title="Form.Observer (class)" href="../../dom/form/observer.html">Form.Observer</a>
              </div>
</li>
<li>              <div class='menu-item'>
                <a class="class" title="Form.Element.EventObserver (class)" href="../../dom/form/element/eventobserver.html">Form.Element.EventObserver</a>
              </div>
</li>
<li>              <div class='menu-item'>
                <a class="class" title="Form.Element.EventObserver (class)" href="../../dom/form/element/eventobserver.html">Form.Element.EventObserver</a>
              </div>
</li>
<li>              <div class='menu-item'>
                <a class="class" title="Form.Element.Observer (class)" href="../../dom/form/element/observer.html">Form.Element.Observer</a>
              </div>
</li></ul></li>
<li>              <div class='menu-item'>
                <a class="class" title="Selector (class)" href="../../dom/selector.html">Selector</a>
              </div>
</li>
<li>              <div class='menu-item'>
                <a class="namespace" title="document (namespace)" href="../../dom/document.html">document</a>
              </div>
<ul><li>              <div class='menu-item'>
                <a class="namespace" title="document.viewport (namespace)" href="../../dom/document/viewport.html">document.viewport</a>
              </div>
</li></ul></li></ul></li>
    				
    					<li>              <div class='menu-item'>
                <a class="section" title="Language section (section)" href="../../language_section.html">Language section</a>
              </div>
<ul><li>              <div class='menu-item'>
                <a class="utility" title="$A (utility)" href="../../language/dollara.html">$A</a>
              </div>
</li>
<li>              <div class='menu-item'>
                <a class="utility" title="$H (utility)" href="../../language/dollarh.html">$H</a>
              </div>
</li>
<li>              <div class='menu-item'>
                <a class="utility" title="$R (utility)" href="../../language/dollarr.html">$R</a>
              </div>
</li>
<li>              <div class='menu-item'>
                <a class="utility" title="$w (utility)" href="../../language/dollarw.html">$w</a>
              </div>
</li>
<li>              <div class='menu-item'>
                <a class="class" title="Array (class)" href="../../language/array.html">Array</a>
              </div>
</li>
<li>              <div class='menu-item'>
                <a class="namespace" title="Class (namespace)" href="../../language/class.html">Class</a>
              </div>
</li>
<li>              <div class='menu-item'>
                <a class="class" title="Date (class)" href="../../language/date.html">Date</a>
              </div>
</li>
<li>              <div class='menu-item'>
                <a class="mixin" title="Enumerable (mixin)" href="../../language/enumerable.html">Enumerable</a>
              </div>
</li>
<li>              <div class='menu-item'>
                <a class="class" title="Function (class)" href="../../language/function.html">Function</a>
              </div>
</li>
<li>              <div class='menu-item'>
                <a class="class" title="Hash (class)" href="../../language/hash.html">Hash</a>
              </div>
</li>
<li>              <div class='menu-item'>
                <a class="class" title="Number (class)" href="../../language/number.html">Number</a>
              </div>
</li>
<li>              <div class='menu-item'>
                <a class="class" title="Object (class)" href="../../language/object.html">Object</a>
              </div>
</li>
<li>              <div class='menu-item'>
                <a class="class" title="ObjectRange (class)" href="../../language/objectrange.html">ObjectRange</a>
              </div>
</li>
<li>              <div class='menu-item'>
                <a class="class" title="PeriodicalExecuter (class)" href="../../language/periodicalexecuter.html">PeriodicalExecuter</a>
              </div>
</li>
<li>              <div class='menu-item'>
                <a class="class" title="RegExp (class)" href="../../language/regexp.html">RegExp</a>
              </div>
</li>
<li>              <div class='menu-item'>
                <a class="class" title="String (class)" href="../../language/string.html">String</a>
              </div>
</li>
<li>              <div class='menu-item'>
                <a class="class" title="Template (class)" href="../../language/template.html">Template</a>
              </div>
</li>
<li>              <div class='menu-item'>
                <a class="namespace" title="Try (namespace)" href="../../language/try.html">Try</a>
              </div>
</li></ul></li>
    				
    			</ul>          
        </div> <!-- .api-box -->

        <div class="search-box">
  			  <form>
    			  <label><span class="hidden">Search </span><input type="text" id="search" size="20" /></label>
  			  </form>
  			  <ul id="search_results" class="search-results menu-items" style="display:none"></ul>
        </div> <!-- .search-box -->

      </div> <!-- #menu -->
      
      <div id="main" class="page-content">
        
        



<ul class="breadcrumbs clearfix">
  <li><a href="../../index.html">Home</a> &rarr;</li>
  
  <li><a href="../../ajax_section.html">Ajax</a> &rarr;</li>
  
</ul>

<h2 class="page-title namespace">
  <span class="type">namespace </span>Ajax.Responders
</h2>



<div class="section section-description">
  
  <div class="section-title">
    <h3>Description</h3>
  </div> <!-- .section-title -->
  
  <div class="section-content">
    <p>A repository of global listeners notified about every step of
Prototype-based Ajax requests.</p>

<p>Sometimes, you need to provide generic behaviors over all Ajax operations
happening on the page (through <code><a title="Ajax.Request (class)" href="../../ajax/ajax/request.html">Ajax.Request</a></code>, <code><a title="Ajax.Updater (class)" href="../../ajax/ajax/updater.html">Ajax.Updater</a></code> or
<code><a title="Ajax.PeriodicalUpdater (class)" href="../../ajax/ajax/periodicalupdater.html">Ajax.PeriodicalUpdater</a></code>).</p>

<p>For instance, you might want to automatically show an indicator when an
Ajax request is ongoing, and hide it when none are. You may well want to
factor out exception handling as well, logging those somewhere on the page
in a custom fashion. The possibilities are myriad.</p>

<p>To achieve this, Prototype provides <code>Ajax.Responders</code>, which lets you
register (and, if you wish, unregister later) <em>responders</em>, which are
objects with specially-named methods. These names come from a set of
general callbacks corresponding to different points in time (or outcomes)
of an Ajax request's life cycle.</p>

<p>For instance, Prototype automatically registers a responder that maintains
a nifty variable: <code><a title="Ajax.activeRequestCount (class property)" href="../../ajax/ajax.html#activerequestcount-class_property">Ajax.activeRequestCount</a></code>. This represents, at a given
time, the number of currently active Ajax requests &mdash; by monitoring their
<code>onCreate</code> and <code>onComplete</code> events. The code for this is fairly simple:</p>

<pre><code class="javascript">Ajax.Responders.register({
  onCreate: function() {
    Ajax.activeRequestCount++;
  },
  onComplete: function() {
    Ajax.activeRequestCount--;
  }
});
</code></pre>

<h4>Responder callbacks</h4>

<p>The callbacks for responders are similar to the callbacks described in
the <a title="Ajax section (section)" href="../../ajax_section.html">Ajax section</a>, but take a different signature. They're invoked with
three parameters: the requester object (i.e., the corresponding "instance"
of <code><a title="Ajax.Request (class)" href="../../ajax/ajax/request.html">Ajax.Request</a></code>), the <code>XMLHttpRequest</code> object, and the result of
evaluating the <code>X-JSON</code> response header, if any (can be <code>null</code>). They also
execute in the context of the responder, bound to the <code>this</code> reference.</p>

<ul>
<li><code>onCreate</code>: Triggered whenever a requester object from the <code>Ajax</code>
namespace is created, after its parameters are adjusted and before its
XHR connection is opened. This takes <em>two</em> arguments: the requester
object and the underlying XHR object.</li>
<li><code>onUninitialized</code> (<em>Not guaranteed</em>):  Invoked just after the XHR object
is created.</li>
<li><code>onLoading</code> (<em>Not guaranteed</em>): Triggered when the underlying XHR object
is being setup, and its connection opened.</li>
<li><code>onLoaded</code> (<em>Not guaranteed</em>): Triggered once the underlying XHR object
is setup, the connection is open, and it is ready to send its actual
request.</li>
<li><code>onInteractive</code> (<em>Not guaranteed</em>): Triggered whenever the requester
receives a part of the response (but not the final part), should it
be sent in several packets.</li>
<li><code>onException</code>: Triggered whenever an XHR error arises. Has a custom
signature: the first argument is the requester (i.e. an <code><a title="Ajax.Request (class)" href="../../ajax/ajax/request.html">Ajax.Request</a></code>
instance), and the second is the exception object.</li>
<li><code>onComplete</code>: Triggered at the <em>very end</em> of a request's life-cycle, after
the request completes, status-specific callbacks are called, and possible
automatic behaviors are processed. Guaranteed to run regardless of what
happened during the request.</li>
</ul>
  </div> <!-- .section-content -->
  
</div> <!--.section -->









<div class="section section-method-list">
  <div class="section-title">
    <h3>Methods</h3>
  </div> <!-- .section-title -->
  
  <div class="section-content">
    <ul class="method-list">
      
        <li><code><a class="class-method" title="Ajax.Responders.register (class method)" href="../../ajax/ajax/responders.html#register-class_method">register</a></code></li>
      
        <li><code><a class="class-method" title="Ajax.Responders.unregister (class method)" href="../../ajax/ajax/responders.html#unregister-class_method">unregister</a></code></li>
      
    </ul>
    
    
    
    
  </div> <!-- .section-content -->
    
</div> <!-- .section -->








  
  

  
  

  
  
    <div class="section section-klass_methods">
      
      <div class="section-title">
        <h3>Class methods</h3>        
      </div> <!-- .section-title -->
      
      <div class="section-content">
        <ul class="method-details-list">
          <li class="method-description">
  <h4 id="register-class_method">register
    <span class="method-permalink"><a href="../../ajax/ajax/responders.html#register-class_method">#</a></span></h4>

  
                  <pre class="syntax"><code class="ebnf">Ajax.Responders.register(responder) -&gt; undefined</code></pre>

  
  
  
    
      <ul class="argument-list">
        
          <li>
            <code>responder</code>
            
              (<code><a title="Object (class)" href="../../language/object.html">Object</a></code>)
            
             &ndash; A list of functions with keys corresponding to the names of possible callbacks.
          </li>
        
      </ul> <!-- .argument-list -->
    
  
  
	<p>Add a group of responders to all Ajax requests.</p>
  
    
  
    
  
    
    
    
  
</li>

<li class="method-description">
  <h4 id="unregister-class_method">unregister
    <span class="method-permalink"><a href="../../ajax/ajax/responders.html#unregister-class_method">#</a></span></h4>

  
                  <pre class="syntax"><code class="ebnf">Ajax.Responders.unregister(responder) -&gt; undefined</code></pre>

  
  
  
    
      <ul class="argument-list">
        
          <li>
            <code>responder</code>
            
              (<code><a title="Object (class)" href="../../language/object.html">Object</a></code>)
            
             &ndash; A list of functions with keys corresponding to the names of possible callbacks.
          </li>
        
      </ul> <!-- .argument-list -->
    
  
  
	<p>Remove a previously-added group of responders.</p>

<p>As always, unregistering something requires you to use the very same
object you used at registration. If you plan to use <code>unregister</code>, be sure
to assign your responder to a <em>variable</em> before passing it into
Ajax.Responders#register &mdash; don't pass it an object literal.</p>
  
    
  
    
  
    
    
    
  
</li>

        </ul>    
        
      </div> <!-- .section-content -->
    </div> <!-- .section -->
  

  
  

  
  


      </div> <!-- #main -->
      
      <div id="footer">
        
        <div class="about clearfix">
          <div class="copyright clearfix">
            <div class="cc">
              <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/"><img alt="Creative Commons License" style="border-width:0" src="http://creativecommons.org/images/public/somerights20.png" /></a>
            </div> <!-- .cc -->
            <div class="copyright-about">
              This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons Attribution-Share Alike 3.0 Unported License</a>.
            </div> <!-- .copyright-about -->
          </div> <!-- .copyright -->
          
          <div class="credits">
            <p>Generated by <a href="http://pdoc.org">PDoc</a>. Uses <a href="http://famfamfam.com/lab/icons/silk/" title="famfamfam.com: Silk Icons">Silk Icons</a>.</p>
            
          </div> <!-- .credits -->
          
        </div> <!-- .about -->
        
        
      </div> <!-- #footer -->
            
    </div> <!-- #page -->

</body>
</html>
